<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Three.js 笔记 | Mirror Night&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <script charset="utf-8" src="/js/custom.js"></script>
    <meta name="description" content=" ">
    <meta name="keywords" content="Mirror Night,vuepress,自建博客,编程">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="author" content="Mirror Night">
    
    <link rel="preload" href="/assets/css/0.styles.e6fe5a67.css" as="style"><link rel="preload" href="/assets/js/app.a6799e27.js" as="script"><link rel="preload" href="/assets/js/4.59a1108c.js" as="script"><link rel="preload" href="/assets/js/1.2bab5923.js" as="script"><link rel="preload" href="/assets/js/33.4e5313a1.js" as="script"><link rel="preload" href="/assets/js/12.216bf9d4.js" as="script"><link rel="prefetch" href="/assets/js/10.8c8e0c1d.js"><link rel="prefetch" href="/assets/js/11.a1fa2a33.js"><link rel="prefetch" href="/assets/js/13.9f81290a.js"><link rel="prefetch" href="/assets/js/14.f5eb041c.js"><link rel="prefetch" href="/assets/js/15.8e3f9b04.js"><link rel="prefetch" href="/assets/js/16.7746776a.js"><link rel="prefetch" href="/assets/js/17.883fe577.js"><link rel="prefetch" href="/assets/js/18.072453e4.js"><link rel="prefetch" href="/assets/js/19.a3ad7ed7.js"><link rel="prefetch" href="/assets/js/20.8c51ed2a.js"><link rel="prefetch" href="/assets/js/21.dae5a620.js"><link rel="prefetch" href="/assets/js/22.56f54320.js"><link rel="prefetch" href="/assets/js/23.c2cd8dfe.js"><link rel="prefetch" href="/assets/js/24.661651b5.js"><link rel="prefetch" href="/assets/js/25.ae912329.js"><link rel="prefetch" href="/assets/js/26.29863ed5.js"><link rel="prefetch" href="/assets/js/27.992088e0.js"><link rel="prefetch" href="/assets/js/28.1493512b.js"><link rel="prefetch" href="/assets/js/29.2b1261ca.js"><link rel="prefetch" href="/assets/js/30.b805af86.js"><link rel="prefetch" href="/assets/js/31.7c6fc2d8.js"><link rel="prefetch" href="/assets/js/32.c2719a52.js"><link rel="prefetch" href="/assets/js/34.8fb2b0e2.js"><link rel="prefetch" href="/assets/js/35.8dfe1a10.js"><link rel="prefetch" href="/assets/js/36.33960ef5.js"><link rel="prefetch" href="/assets/js/5.246df733.js"><link rel="prefetch" href="/assets/js/6.3d649493.js"><link rel="prefetch" href="/assets/js/7.b159e648.js"><link rel="prefetch" href="/assets/js/8.155b6152.js"><link rel="prefetch" href="/assets/js/9.0c53848f.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b4aee4ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e6fe5a67.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-1c4f0192 data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-1c4f0192><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Mirror Night's Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Mirror Night</span>
            
          <span data-v-6cbeab0a>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Mirror Night's Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      文档资料
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nodejs.cn/api/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Node.js 文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuejs.bootcss.com/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Vue中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.ycsnews.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  前端开发文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    Mirror Night
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>23</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>18</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      文档资料
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  MDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://nodejs.cn/api/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Node.js 文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuejs.bootcss.com/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  Vue中文文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.ycsnews.com/docs/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  前端开发文档
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ThreeJs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/技术文章/ThreeJs/threejs.html" class="active sidebar-link">Three.js 笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#组成" class="sidebar-link">组成</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#周期动画渲染" class="sidebar-link">周期动画渲染</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#点线面模型" class="sidebar-link">点线面模型</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#几何体创建" class="sidebar-link">几何体创建</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#raycaster-光线投射" class="sidebar-link">Raycaster 光线投射</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#requestanimationframe-周期性渲染" class="sidebar-link">requestAnimationFrame 周期性渲染</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#光源设置" class="sidebar-link">光源设置</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#相机设置" class="sidebar-link">相机设置</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#webglrenderer-渲染器" class="sidebar-link">WebGLRenderer - 渲染器</a></li><li class="sidebar-sub-header"><a href="/技术文章/ThreeJs/threejs.html#实际开发中遇到的问题" class="sidebar-link">实际开发中遇到的问题</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Three.js 笔记</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Mirror Night</span>
            
          <span data-v-6cbeab0a>2021 - </span>
          2022
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>Three.js 笔记</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>Mirror Night</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2022-10-05 12:00:00</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      Three.js
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p class="custom-block-title">说明</p> <p>Three.js 学习笔记，主要内容为 three.js 程序的基本构成以及在实际开发中遇到的问题，代码地址：</p> <blockquote><p>https://github.com/MirrorN/Co-Learning/Three-JS</p></blockquote></div> <h2 id="组成"><a href="#组成" class="header-anchor">#</a> 组成</h2> <p>Three.js 构建程序的组成有三部分：场景 -- 相机 -- 渲染器（其整个过程与现实生活中拍照的过程是一致的）</p> <ul><li>场景 Scene
<ul><li>网格模型 Mesh
<ul><li>几何体：定义几何体的种类，例如球体、立方体、圆柱体等等</li> <li>材质：用于表现几何体的颜色、透明度等等</li></ul></li> <li>光源 Light
<ul><li>定义环境光、点光源或者平行光的位置以及颜色等等</li></ul></li></ul></li> <li>相机 Camera
<ul><li>相当于观察者的眼睛位置，设置观察物体的位置、观察方向等等</li></ul></li> <li>渲染器 Renderer
<ul><li>渲染器作用的直观理解相当于快门，得到经过渲染后观察者所见的场景结果</li></ul></li></ul> <h2 id="周期动画渲染"><a href="#周期动画渲染" class="header-anchor">#</a> 周期动画渲染</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//执行渲染操作</span>
    mesh1<span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token number">0.005</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每次绕y轴旋转0.01弧度</span>
    mesh3<span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//每次绕y轴旋转0.01弧度</span>
    scene<span class="token punctuation">.</span><span class="token function">rotateY</span><span class="token punctuation">(</span><span class="token number">0.003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//请求再次执行渲染函数render</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> controls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrbitControls</span><span class="token punctuation">(</span>camera<span class="token punctuation">,</span> renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="点线面模型"><a href="#点线面模型" class="header-anchor">#</a> 点线面模型</h2> <ul><li>点模型：将几何体的每个顶点渲染为一个方形区域</li> <li>线模型：使用线将几何体顶点连接起来</li> <li>网格模型：三个顶点确定一个三角形，网格模型通过一系列三角形拼接组成一个曲面</li></ul> <p>网格模型更为精细，在属性中设置 wireframe 可以看到构成几何体的所有三角形：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> material3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">wireframe</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="几何体创建"><a href="#几何体创建" class="header-anchor">#</a> 几何体创建</h2> <h3 id="spheregeometry-球"><a href="#spheregeometry-球" class="header-anchor">#</a> SphereGeometry - 球</h3> <p>创建球体，其构造函数格式为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SphereGeometry(radius, widthSegments[32], heightSegments[16], phiStart[0], phiLength[2*PI], thetaStart[0], thetaLength[2*PI])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中：</p> <ul><li>widthSegments 、heightSegments 表示水平和竖直方向上的顶点数，通过多个等间距的顶点构建水平的圆环或竖直的圆环，其中前者默认为32， 后者默认值为16</li> <li>phiStart等参数用于控制生成不规则的球体（球体切片）（球体创建是通过绕y轴和x轴创建的，后四个参数可以控制这些顶点的起点）</li></ul> <h3 id="ringgeometry-圆环"><a href="#ringgeometry-圆环" class="header-anchor">#</a> RingGeometry - 圆环</h3> <p>圆环构造函数为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>RingGeometry(innerRadius[0.5], outerRadius[1], thetaSegments[&gt;=3, default=8], phiSegments[&gt;=1,default=8], thetaStart[0])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="cylindergeometry-圆柱"><a href="#cylindergeometry-圆柱" class="header-anchor">#</a> CylinderGeometry - 圆柱</h3> <p>构造函数格式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>CylinderGeometry(
	radiusTop: 顶部半径 default=1
	radiusBottom: 底部半径 default=1
	height：高度 default=1
	radialSegments： 圆柱侧面的分段数 相当于横向分了多少段 default=8
	heightSegments： 圆柱侧面沿高度的分段数 纵向分了多少段 default=1
	openEnded: boolean 指明圆锥的底面是开放的还是封闭的 default=false（封顶） 如果设置为true 在高度设置为0的时候展示的是一个圆环
	thetaStart：第一个分段的起始角度 default=0
	thetaLength： 圆柱底面圆扇区的中心角 default=PI*2
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>最后两个依然用来构造不完整的圆柱</p> <h3 id="ellipsecurve-椭圆曲线"><a href="#ellipsecurve-椭圆曲线" class="header-anchor">#</a> EllipseCurve - 椭圆曲线</h3> <p>构造函数格式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>EllipseCurve(
	aX: 椭圆中心x坐标 default 0
	aY: y坐标 default 0
	xRadius： x轴方向上的椭圆半径 default 1
	yRadius： y轴方向上的椭圆半径 default 1
	aStartAngle：弧度表示的 x轴起曲线开始的角度 default 0
	aEndAngle： 弧度表示的 x轴起的曲线终止的角度 default PI*2
	aClockwise： 是否按照顺时针方向绘制 default false
	aRotation： 旋转角度
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>绘制椭圆曲线，过程为： 创建曲线 -&gt; 取点 -&gt; 使用这些点构建缓冲几何体：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> curve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>EllipseCurve</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> aRoation<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> points <span class="token operator">=</span> curve<span class="token punctuation">.</span><span class="token function">getPoints</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BufferGeometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFromPoints</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> line <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Line</span><span class="token punctuation">(</span>geometry<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="raycaster-光线投射"><a href="#raycaster-光线投射" class="header-anchor">#</a> Raycaster 光线投射</h2> <p>该方法用于鼠标点击获取，在三维空间中计算鼠标移过了什么物体，其构造方法为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Raycaster(
	origin: 光线投射的原点向量 （vector3）
	direction： 射线提供方向的方向向量，应标准化 （vector3）
    near：返回的所有结果应该比 near值大 （float default=0）
    far：返回的所有结果应该比 far 小（float default=inf.）
)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>后两个相当于限定距离，限制指定距离内的对象被选中。</p> <p>两个主要方法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>raycaster.setFromCamera (coords: vector2,  camera: Camera)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>coords： <strong>标准化后的鼠标坐标</strong>（方向）</li> <li>camera：相机（射线原点）</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>var res = raycaster.intersectObject(object: Object3D, recursive: boolean, optionalTarget: Array)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>object：检查与射线相交的几何体（一般我们会首先将所有可点击的物体加入到物体列表进行传入，或者直接使用scene.children 对场景的所有物体进行检查）</li> <li>recursive：default=false 表示只检查对象本身，不检查对象后代（如果使用了Group将多个物体设置为一组，需要设置为 true）</li> <li>optionalTarget：结果目标数组，每次使用时必须清空</li></ul> <p><strong>该方法返回的是所有与射线交叉的数组</strong>，这些相交的物体会按照距离进行排序，实际中一般都是用最近的物体表示点击的物体，所以会使用 <strong>res[0]</strong>，返回的数组形式：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[{distance, point, face, object...}, {}, {}...]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中 distance 表示射线原点与相交点之间的距离 point 表示相交点的位置坐标 object 表示相交的物体，因此如果要对点击的物体做操作的话要使用 <code>res[0].object.xxx</code></p> <h2 id="requestanimationframe-周期性渲染"><a href="#requestanimationframe-周期性渲染" class="header-anchor">#</a> requestAnimationFrame 周期性渲染</h2> <p>每次执行 render 方法，浏览器就会渲染出一帧图像显示，因此，物体移动动画效果的原理就是： 物体移动 + 重新渲染。由此设定渲染页面的间隔，就可以实现物体移动的动画。</p> <p>设定自动渲染的方法上，可以但不推荐使用 <code>window.setInterval()</code>方法，现在更好的选择是 <code>window.requestAnimationFrame()</code>方法。</p> <p><code>requestAnimationFrame()</code>的参数为<strong>待调用的函数</strong>，该方法会向浏览器发起执行该函数的请求，而执行是由浏览器决定，默认情况下是 60FPS</p> <h2 id="光源设置"><a href="#光源设置" class="header-anchor">#</a> 光源设置</h2> <p>使用到的光源有：</p> <p><strong>点光源</strong>：从发光点向外发散，可以使物体表面不同区域的明暗程度变化，需要设置位置</p> <p><strong>环境光</strong>：没有特定方向的光源 主要是整体均匀的改变物体表面的明暗程度</p> <h2 id="相机设置"><a href="#相机设置" class="header-anchor">#</a> 相机设置</h2> <p>根据正射投影和透视投影两种，three.js中的相机分为两类：正投影相机对象 和 透视投影相机 ，后者即是人的眼睛观察世界的方式。</p> <p>正投影相机对象的建立：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
<span class="token keyword">var</span> k <span class="token operator">=</span> width <span class="token operator">/</span> height<span class="token punctuation">;</span>
<span class="token comment">// 范围系数 值越大显示的范围越大</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">;</span>

<span class="token comment">// 正投影相机对象</span>
<span class="token keyword">var</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrthographicCamera</span><span class="token punctuation">(</span><span class="token operator">-</span>s <span class="token operator">*</span> k<span class="token punctuation">,</span> s <span class="token operator">*</span> k<span class="token punctuation">,</span> s<span class="token punctuation">,</span> <span class="token operator">-</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// OrthographicCamera(left, right, top, bottom, near, far)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>其中前四个参数表示渲染空间的边界（left、right、top、bottom），near表示从距离相机多远的位置开始渲染，一般设置非常小的值 default=0.1， far 表示停止渲染的位置 default=1000</p> <p>例如，相机和光源的基础设置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PointLight</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
point<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ambient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>AmbientLight</span><span class="token punctuation">(</span><span class="token number">0x444444</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ambient<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="webglrenderer-渲染器"><a href="#webglrenderer-渲染器" class="header-anchor">#</a> WebGLRenderer - 渲染器</h2> <p>用于渲染场景，其基本设置如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建渲染器</span>
<span class="token keyword">var</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span>antialias<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设定渲染器尺寸 颜色</span>
renderer<span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">setClearColor</span><span class="token punctuation">(</span><span class="token number">0xcccccc</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* renderer.domElement 表示渲染结果 一个canvas对象
           需要向 body （或者某个局部div）中追加进去*/</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>renderer<span class="token punctuation">.</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>其中 <code>new THREE.WebGLRenderer(parameter： object)</code>创建了一个渲染器，参数 antialias 表示是否开启抗锯齿，默认为 false。</p> <p>renderer的属性 domElement 表示一个 canves，渲染器在上面绘制输出，可以将它添加到 body（全局） 或者 div（局部） 元素 上进行展示</p> <h2 id="实际开发中遇到的问题"><a href="#实际开发中遇到的问题" class="header-anchor">#</a> 实际开发中遇到的问题</h2> <h3 id="改变物体材质-位置"><a href="#改变物体材质-位置" class="header-anchor">#</a> 改变物体材质，位置</h3> <p>使用对应的 set 方法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mesh1.position.set(0, 60, 0)
intersects[0].object.material.color.set(0x000000)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="改变物体半径"><a href="#改变物体半径" class="header-anchor">#</a> 改变物体半径</h3> <p>注意直接设置 geometry 的 radius 是不起作用的（虽然从控制台看见确实设置成功了），真正能看到的画面来自于 mesh ，因此需要对 mesh 进行设置：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mesh.scale.set(0x000000)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>(原始文档中提到，geometry 实例化之后，对其参数的修改不会改变其样式)</p> <h3 id="修改位置信息"><a href="#修改位置信息" class="header-anchor">#</a> 修改位置信息</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mesh.position.set(x, y, z);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="修改物体旋转角度"><a href="#修改物体旋转角度" class="header-anchor">#</a> 修改物体旋转角度</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mesh.rotation.x = rotateX;
mesh.rotation.y = rotateY;
mesh.rotation.z = rotateZ;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="修改物体是否可见"><a href="#修改物体是否可见" class="header-anchor">#</a> 修改物体是否可见</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>material.visible = false; // 这里最好设置下material的transparent为true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="meshbasicmaterial-与-meshphongmaterial"><a href="#meshbasicmaterial-与-meshphongmaterial" class="header-anchor">#</a> MeshBasicMaterial 与 MeshPhongMaterial</h3> <h4 id="meshbasicmaterial"><a href="#meshbasicmaterial" class="header-anchor">#</a> MeshBasicMaterial</h4> <p>这是一种简单材质，<strong>不会考虑环境场景中光照的影响</strong>，这种材质的网格会被渲染成简单的平面多边形，也可以显示几何体的线框，对场景的雾化会有反应，主要属性：</p> <ul><li>color：颜色</li> <li>wireframe：渲染成线框，适合调试</li> <li>wireframeLinewidth：线框宽度</li> <li>fog：雾化，true或者 false，设置是否受到雾化影响</li></ul> <h4 id="meshphongmaterial"><a href="#meshphongmaterial" class="header-anchor">#</a> MeshPhongMaterial</h4> <p>可以创建一种光亮的材质，可以模拟带有高光的闪亮表面，例如漆木，主要属性：</p> <ul><li>color：颜色</li> <li>shininess：光滑度，指定高光部分的亮度默认为30</li> <li>specular：材料高光部分的颜色，默认为0x111111深灰色，如果设置为与color一样，会得到类似金属一样的材质，设置为灰色则看起来更像塑料</li> <li>wrapAround：true 或者 false，使用这个lambert光照技术，光下降的更微妙，如果网格有粗糙、黑暗的地区， 启用后这个属性阴影将会变得柔和并且分布的更加均匀</li></ul> <blockquote><p>参考：https://blog.csdn.net/youlinhuanyan/article/details/104344383</p></blockquote> <h3 id="获取点击位置的坐标"><a href="#获取点击位置的坐标" class="header-anchor">#</a> 获取点击位置的坐标</h3> <p>Three js 有个 bug， 在点击物体之后，如果直接使用检测到的物体输出其坐标：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>intersects[0].object.position
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>会发现输出的结果始终为 0，如果想要获得点击位置的真实三维坐标，要使用 .point 方法获得坐标：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>intersects[0].point.x
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div><!----><!----><!----></div></div>
    <script src="/assets/js/app.a6799e27.js" defer></script><script src="/assets/js/4.59a1108c.js" defer></script><script src="/assets/js/1.2bab5923.js" defer></script><script src="/assets/js/33.4e5313a1.js" defer></script><script src="/assets/js/12.216bf9d4.js" defer></script>
  </body>
</html>
